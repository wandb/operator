---
apiVersion: apps.wandb.com/v1
kind: WeightsAndBiases
metadata:
  labels:
    app.kubernetes.io/name: weightsandbiases
    app.kubernetes.io/instance: weightsandbiases-sample
    app.kubernetes.io/part-of: operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: operator
  name: wandb-default
spec:
  chart:
    url: https://charts.wandb.ai
    name: "operator-wandb"
    version: "0.37.1"
  values:
    global:
      repositoryPrefix: "us-docker.pkg.dev/wandb-production/public"
      imageRegistry: "us-docker.pkg.dev/wandb-production/public"
      bucket:
        provider: "s3"
        name: "minio.minio.svc.cluster.local:9000/bucket"
        region: "us-east-1"
        accessKey: "minio"
        secretKey: "minio123"
      glue:
        enabled: true
      api:
        enabled: true
      executor:
        enabled: true
      size: "testing"

    executor:
      install: true

    filemeta:
      install: true

    frontend:
      install: true

    nginx:
      install: true
      additionalServices:
        bucket:
          host: "http://minio.minio.svc.cluster.local:9000/bucket"
          headers:
            Host: "minio.minio.svc.cluster.local:9000"

    ingress:
      install: false
      create: false

    mysql:
      install: true
      resources:
        requests:
          cpu: "100m"
          memory: "128Mi"

    redis:
      install: true
      resources:
        requests:
          cpu: "100m"
          memory: "128Mi"

    reloader:
      install: true

    settingsMigrationJob:
      install: false